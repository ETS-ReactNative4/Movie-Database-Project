(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{313:function(e,t,a){e.exports=a(599)},318:function(e,t,a){},599:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(80),i=a.n(s),l=(a(318),a(38)),o=a(18),c=a(19),u=a(21),h=a(16),d=a(47),m=a(20),g=a(625),p=a(610),f=a(623),v=a(624),E=a(85),y=a(615),b=a(101),S=a(44),C=a(607),k=a(616),O=a(627),j=a(622),w=a(609),x=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,null,r.a.createElement(j.a,{active:!0,inverted:!0},r.a.createElement(w.a,{size:"massive"},"Loading")))}}]),t}(n.Component),I=a(136),D=a.n(I),A=a(600);function T(e){return r.a.createElement(k.a,{key:e.movie},r.a.createElement(k.a.Content,null,r.a.createElement(k.a.Header,{as:p.a,to:{pathname:"/movie",search:"?id="+e.movieid}},e.title),r.a.createElement(k.a.Meta,null,"Year: ",e.year,r.a.createElement("br",null),"Director: ",e.director,r.a.createElement("br",null),"Rating: ",e.rating),r.a.createElement(k.a.Description,null,r.a.createElement(N,{list:e.stars}))),r.a.createElement(k.a.Content,{extra:!0},r.a.createElement(M,{list:e.genres})),r.a.createElement(A.a,{color:"teal",animated:"fade",onClick:function(){return e.handleAddToCart({id:e.movieid,title:e.title,director:e.director,year:e.year,rating:e.rating})}},r.a.createElement(A.a.Content,{hidden:!0},r.a.createElement(S.a,{name:"plus"})),r.a.createElement(A.a.Content,{visible:!0},"Add to Cart")))}var P=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={valid:!1,mounted:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://"+window.location.hostname+":8443/cs122b/login",{method:"GET",credentials:"include"}).then(function(t){403===t.status||e.setState({valid:!0}),e.setState({mounted:!0})}).catch(function(e){return console.log(e)})}},{key:"componentWillUnmount",value:function(){this.setState({mounted:!1})}},{key:"render",value:function(){var e=this,t=D.a.parse(this.props.location.search);return this.state.mounted&&this.state.valid?r.a.createElement(E.a,{url:"https://"+window.location.hostname+":8443/cs122b/movies?id="+t.id,credentials:"include"},function(t){var a=t.fetching,n=t.failed,s=t.data;return a?r.a.createElement(x,null):(n&&console.log("Error in film.js"),s?r.a.createElement(C.a,null,r.a.createElement(k.a.Group,{centered:!0},r.a.createElement(T,{movieid:s.id,title:s.title,year:s.year,director:s.director,rating:s.rating,stars:s.stars,genres:s.genres,handleAddToCart:e.props.handleAddToCart}))):null)}):this.state.mounted&&!this.state.valid?r.a.createElement(O.a,{to:"/login"}):r.a.createElement(x,null)}}]),t}(n.Component);function N(e){var t=Object.keys(e.list).map(function(t){return r.a.createElement(y.a.Item,{key:t},r.a.createElement(p.a,{to:{pathname:"/star",search:"?id="+e.list[t].id}},r.a.createElement(b.a,null,r.a.createElement(S.a,{name:"male"}),e.list[t].name)))});return r.a.createElement(y.a,{link:!0},r.a.createElement(y.a.Item,{active:!0},"Actors"),t)}function M(e){var t=Object.keys(e.list).map(function(t){return r.a.createElement(y.a.Item,{key:t,as:p.a,to:{pathname:"/browse",state:{genre:e.list[t],reload:"yes"}}},e.list[t])});return r.a.createElement(y.a,{horizontal:!0},t)}var G=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:0,valid:!1,mounted:!1,data:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://"+window.location.hostname+":8443/cs122b/login",{method:"GET",credentials:"include"}).then(function(t){403===t.status?e.setState({valid:!1}):e.setState({valid:!0}),e.setState({mounted:!0})}).catch(function(e){return console.log(e)})}},{key:"componentWillUnmount",value:function(){this.setState({mounted:!1})}},{key:"render",value:function(){var e=this;return this.state.mounted&&this.state.valid?r.a.createElement(E.a,{url:"https://"+window.location.hostname+":8443/cs122b/top20",credentials:"include"},function(t){var a=t.fetching,n=t.failed,s=t.data;if(a)return r.a.createElement(x,null);if(n&&console.log("Error"),s){var i=Object.keys(s).map(function(t){return r.a.createElement(T,{key:t,movieid:s[t].id,title:s[t].title,year:s[t].year,director:s[t].director,rating:s[t].rating,stars:s[t].stars,genres:s[t].genres,handleAddToCart:e.props.handleAddToCart})});return r.a.createElement(C.a,null,r.a.createElement(k.a.Group,{centered:!0},i))}return null}):!this.state.valid&&this.state.mounted?r.a.createElement(O.a,{to:"/login"}):r.a.createElement(x,null)}}]),t}(n.Component),R=a(620);function L(e){var t=Object.keys(e.list).map(function(t){return r.a.createElement(y.a.Item,{key:t},r.a.createElement(p.a,{to:{pathname:"/movie",search:"?id="+e.list[t].id}},r.a.createElement(b.a,null,r.a.createElement(S.a,{name:"film"}),e.list[t].title)))});return r.a.createElement(y.a,{link:!0},t)}var J=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={valid:!1,mounted:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://"+window.location.hostname+":8443/cs122b/login",{method:"GET",credentials:"include"}).then(function(t){403===t.status?console.log("Invalid session"):e.setState({valid:!0}),e.setState({mounted:!0})}).catch(function(e){return console.log(e)})}},{key:"componentWillUnmount",value:function(){this.setState({mounted:!1})}},{key:"render",value:function(){var e=D.a.parse(this.props.location.search);return this.state.mounted&&this.state.valid?r.a.createElement(E.a,{url:"https://"+window.location.hostname+":8443/cs122b/star?id="+e.id,credentials:"include"},function(e){var t=e.fetching,a=e.failed,n=e.data;if(t)return r.a.createElement(x,null);if(a&&console.log("Error"),n){var s="Born in "+n.birthYear;return 0===n.birthYear&&(s=" "),r.a.createElement(C.a,null,r.a.createElement(k.a.Group,{centered:!0},r.a.createElement(k.a,null,r.a.createElement(k.a.Content,null,r.a.createElement(k.a.Header,null,r.a.createElement(R.a,{as:"h1"},n.title)),r.a.createElement(k.a.Meta,null,s),r.a.createElement(k.a.Description,null,r.a.createElement(L,{list:n.movies}))))))}return null}):!this.state.valid&&this.state.mounted?r.a.createElement(O.a,{to:"/login"}):r.a.createElement(x,null)}}]),t}(n.Component),q=a(621),U=a(612),B=a(619),_=a(617),W=a(300),Y=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",recaptcha:"",disable_button:!0,valid:!1,error:!1,mounted:!1},a.verifyCallback=function(e){a.setState({recaptcha:e,disable_button:!1}),console.log(e)},a.handleNameChange=function(e){a.setState({username:e.target.value})},a.handlePassChange=function(e){a.setState({password:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t={username:a.state.username,password:a.state.password,g_recaptcha_response:a.state.recaptcha};a.getSession(t)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://"+window.location.hostname+":8443/cs122b/login",{method:"GET",credentials:"include"}).then(function(t){403===t.status?console.log("Invalid session"):(console.log("Logged in"),e.setState({valid:!0})),e.setState({mounted:!0})}).catch(function(e){return console.log(e)})}},{key:"componentWillUnmount",value:function(){this.setState({mounted:!1})}},{key:"getSession",value:function(e){var t=this;fetch("https://"+window.location.hostname+":8443/cs122b/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then(function(e){return 403===e.status?(document.getElementById("Form").reset(),t.setState({valid:!1}),t.setState({error:!0})):t.setState({valid:!0}),e.json()}).then(function(e){t.props.getCust(e)}).catch(function(e){return console.log(e)})}},{key:"getRetVal",value:function(){return r.a.createElement(O.a,{to:"/"})}},{key:"render",value:function(){return!this.state.valid&&this.state.mounted?r.a.createElement("div",null,r.a.createElement(q.a,{textAlign:"center",verticalAlign:"middle"},r.a.createElement(q.a.Column,{style:{maxWidth:450}},r.a.createElement(R.a,{as:"h3",color:"teal",textAlign:"center"},"Login to your account"),r.a.createElement(U.a,{size:"large",onSubmit:this.handleSubmit,id:"Form",error:!0},r.a.createElement(B.a,{stacked:!0},r.a.createElement(U.a.Input,{fluid:!0,icon:"user",placeholder:"Username",onChange:this.handleNameChange}),r.a.createElement(U.a.Input,{fluid:!0,icon:"lock",placeholder:"Password",onChange:this.handlePassChange,type:"password"}),this.state.error?r.a.createElement(_.a,{error:this.state.error,header:"Error",content:"Invalid Username/Password"}):null,r.a.createElement(B.a,null,r.a.createElement(W.a,{sitekey:"6LcOX5AUAAAAAGBgvP1F36tDbNdub8r2Bnhmt78H",onChange:this.verifyCallback})),r.a.createElement(A.a,{disabled:this.state.disable_button,color:"teal",fluid:!0,size:"large",type:"submit"},"Submit")))))):this.state.valid&&this.state.mounted?(console.log("Back to home"),r.a.createElement("div",null,this.getRetVal())):r.a.createElement(x,null)}}]),t}(n.Component),z=(a(431),a(68)),V=[{key:"10",text:"10 Per Page",value:"10"},{key:"25",text:"25 Per Page",value:"25"},{key:"50",text:"50 Per Page",value:"50"},{key:"100",text:"100 Per Page",value:"100"}];function F(e){var t=Object.keys(e.data).map(function(t){return r.a.createElement(T,{key:t,movieid:e.data[t].id,title:e.data[t].title,year:e.data[t].year,director:e.data[t].director,rating:e.data[t].rating,stars:e.data[t].stars,genres:e.data[t].genres,handleAddToCart:e.handleAddToCart})});return r.a.createElement(C.a,null,r.a.createElement(k.a.Group,{centered:!0},t))}var H=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={valid:!1,mounted:!1},a.handleLimitChange=function(e,t){a.setState({limit:parseInt(t.value,10)})},a.handleSubmit=function(e){e.preventDefault(),a.setState({activePage:1},a.getMovies)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://"+window.location.hostname+":8443/cs122b/login",{method:"GET",credentials:"include"}).then(function(t){403===t.status?e.setState({valid:!1}):e.setState({valid:!0}),e.setState({mounted:!0})}).catch(function(e){return console.log(e)})}},{key:"componentWillUnmount",value:function(){this.setState({mounted:!1})}},{key:"getMovies",value:function(){}},{key:"renderContent",value:function(){switch(this.state.search){case"loading":return r.a.createElement(x,null);case"received":return r.a.createElement(F,{data:this.state.data,handleAddToCart:this.props.handleAddToCart});default:return null}}},{key:"render",value:function(){return this.state.mounted&&this.state.valid?r.a.createElement("div",null,this.renderContent()):!this.state.valid&&this.state.mounted?r.a.createElement(O.a,{to:"/login"}):r.a.createElement(x,null)}}]),t}(n.Component),X=a(614),$=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",search:"notsearched",director:"",year:"",name:"",data:null,limit:10,pages:0,activePage:1,total:0,sort:"rating",order:"DESC"},a.handleTitleChange=function(e){a.setState({title:e.target.value})},a.handleDirectorChange=function(e){a.setState({director:e.target.value})},a.handleYearChange=function(e){a.setState({year:e.target.value})},a.handleNameChange=function(e){a.setState({name:e.target.value})},a.handlePaginationChange=function(e,t){var n=t.activePage;return a.setState({activePage:n},a.getMovies)},a.handleOrderChange=function(e,t){a.setState({order:t.value})},a.handleSortChange=function(e,t){a.setState({sort:t.value})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getMovies",value:function(){var e=this;this.setState({search:"loading"}),fetch("https://"+window.location.hostname+":8443/cs122b/search?title="+this.state.title+"&year="+this.state.year+"&director="+this.state.director+"&name="+this.state.name+"&limit="+this.state.limit+"&offset="+(this.state.activePage-1)*this.state.limit+"&sort="+this.state.sort+"&order="+this.state.order,{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(t){return e.setState({data:t.movies,total:t.numRecords,search:"received"},function(){this.setState({pages:Math.ceil(this.state.total/this.state.limit)})})})}},{key:"render",value:function(){return this.state.mounted&&this.state.valid?r.a.createElement("div",null,r.a.createElement(B.a,null,r.a.createElement(U.a,{size:"large",onSubmit:this.handleSubmit},r.a.createElement(U.a.Group,{widths:"equal"},r.a.createElement(U.a.Input,{fluid:!0,icon:"film",placeholder:"Movie Name",onChange:this.handleTitleChange}),r.a.createElement(U.a.Input,{fluid:!0,icon:"star outline",placeholder:"Star Name",onChange:this.handleNameChange}),r.a.createElement(U.a.Input,{fluid:!0,icon:"male",placeholder:"Director",onChange:this.handleDirectorChange}),r.a.createElement(U.a.Input,{fluid:!0,icon:"calendar alternate outline",placeholder:"Year",onChange:this.handleYearChange})),r.a.createElement(U.a.Group,{widths:"equal"},r.a.createElement(U.a.Select,{fluid:!0,placeholder:"Sort",onChange:this.handleSortChange,options:[{key:1,text:"Rating",value:"rating"},{key:2,text:"Title",value:"title"}]}),r.a.createElement(U.a.Select,{fluid:!0,placeholder:"Order Asc/Desc",onChange:this.handleOrderChange,options:[{key:1,text:"Ascending",value:"ASC"},{key:2,text:"Descending",value:"DESC"}]}),r.a.createElement(U.a.Select,{fluid:!0,placeholder:"Results Per Page",onChange:this.handleLimitChange,options:V}),r.a.createElement(A.a,{color:"teal",fluid:!0,size:"small",type:"submit"},"Search"))),"notsearched"!==this.state.search?r.a.createElement(C.a,{textAlign:"center"},r.a.createElement(X.a,{totalPages:this.state.pages,activePage:this.state.activePage,onPageChange:this.handlePaginationChange,siblingRange:2})):null),Object(z.a)(Object(h.a)(t.prototype),"render",this).call(this,this.props)):!this.state.valid&&this.state.mounted?r.a.createElement(O.a,{to:"/login"}):r.a.createElement(x,null)}}]),t}(H),K=[{key:"1",text:"a",value:"a"},{key:"2",text:"b",value:"b"},{key:"3",text:"c",value:"c"},{key:"4",text:"d",value:"d"},{key:"5",text:"e",value:"e"},{key:"6",text:"f",value:"f"},{key:"7",text:"g",value:"g"},{key:"8",text:"h",value:"h"},{key:"9",text:"i",value:"i"},{key:"10",text:"j",value:"j"},{key:"11",text:"k",value:"k"},{key:"12",text:"l",value:"l"},{key:"13",text:"m",value:"m"},{key:"14",text:"n",value:"n"},{key:"15",text:"o",value:"o"},{key:"16",text:"p",value:"p"},{key:"17",text:"q",value:"q"},{key:"18",text:"r",value:"r"},{key:"19",text:"s",value:"s"},{key:"20",text:"t",value:"t"},{key:"21",text:"u",value:"u"},{key:"22",text:"v",value:"v"},{key:"23",text:"w",value:"w"},{key:"24",text:"x",value:"x"},{key:"25",text:"y",value:"y"},{key:"26",text:"z",value:"z"},{key:"27",text:"0",value:"0"},{key:"28",text:"1",value:"1"},{key:"29",text:"2",value:"2"},{key:"30",text:"3",value:"3"},{key:"31",text:"5",value:"5"},{key:"32",text:"6",value:"6"},{key:"33",text:"7",value:"7"},{key:"34",text:"8",value:"8"},{key:"35",text:"9",value:"9"}],Q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={search:"notsearched",genre:"",letter:"",limit:10,pages:0,activePage:1,sort:"rating",order:"DESC",genres:[]},a.handlePaginationChange=function(e,t){var n=t.activePage;return a.setState({activePage:n},a.getMovies)},a.handleGenreChange=function(e,t){a.setState({genre:t.value,letter:""})},a.handleLetterChange=function(e,t){a.setState({letter:t.value,genre:""})},a.handleOrderChange=function(e,t){a.setState({order:t.value})},a.handleSortChange=function(e,t){a.setState({sort:t.value})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getMovies",value:function(){var e=this;this.setState({search:"loading"}),fetch("https://"+window.location.hostname+":8443/cs122b/browse?genre="+this.state.genre+"&letter="+this.state.letter+"&limit="+this.state.limit+"&offset="+(this.state.activePage-1)*this.state.limit+"&sort="+this.state.sort+"&order="+this.state.order,{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(t){return e.setState({data:t.movies,total:t.numRecords,search:"received"},function(){this.setState({pages:Math.ceil(this.state.total/this.state.limit)})})})}},{key:"parseOptions",value:function(e){return e.map(function(e){return{key:e,text:e,value:e}})}},{key:"componentDidMount",value:function(){var e=this;Object(z.a)(Object(h.a)(t.prototype),"componentDidMount",this).call(this),fetch("https://"+window.location.hostname+":8443/cs122b/browse",{method:"post",credentials:"include"}).then(function(e){return e.json()}).then(function(t){e.setState({genres:e.parseOptions(t)})});try{this.setState({genre:this.props.location.state.genre},function(){null===this.state.genre?this.setState({genre:""}):this.getMovies()})}catch(a){console.log("Accessed without passing genre state")}}},{key:"componentWillReceiveProps",value:function(e){"yes"===e.location.state.reload&&this.setState({genre:e.location.state.genre},function(){this.getMovies()})}},{key:"render",value:function(){return this.state.mounted&&this.state.valid?r.a.createElement("div",null,r.a.createElement(B.a,null,r.a.createElement(U.a,{size:"large",onSubmit:this.handleSubmit},r.a.createElement(U.a.Group,{widths:"equal"},r.a.createElement(U.a.Select,{fluid:!0,placeholder:"Genre",value:this.state.genre,onChange:this.handleGenreChange,options:this.state.genres}),r.a.createElement(U.a.Select,{fluid:!0,placeholder:"Starting Letter",value:this.state.letter,onChange:this.handleLetterChange,options:K})),r.a.createElement(U.a.Group,{widths:"equal"},r.a.createElement(U.a.Select,{fluid:!0,placeholder:"Sort",onChange:this.handleSortChange,options:[{key:1,text:"Rating",value:"rating"},{key:2,text:"Title",value:"title"}]}),r.a.createElement(U.a.Select,{fluid:!0,placeholder:"Order Asc/Desc",onChange:this.handleOrderChange,options:[{key:1,text:"Ascending",value:"ASC"},{key:2,text:"Descending",value:"DESC"}]}),r.a.createElement(U.a.Select,{fluid:!0,placeholder:"Results Per Page",onChange:this.handleLimitChange,options:V}),r.a.createElement(A.a,{color:"teal",fluid:!0,size:"small",type:"submit"},"Browse"))),"notsearched"!==this.state.search?r.a.createElement(C.a,{textAlign:"center"},r.a.createElement(X.a,{totalPages:this.state.pages,activePage:this.state.activePage,onPageChange:this.handlePaginationChange,siblingRange:2})):null),Object(z.a)(Object(h.a)(t.prototype),"render",this).call(this,this.props)):!this.state.valid&&this.state.mounted?r.a.createElement(O.a,{to:"/login"}):r.a.createElement(x,null)}}]),t}(H),Z=a(611),ee=a(613);function te(e){for(var t in e)return!1;return!0}function ae(){return r.a.createElement(C.a,null,r.a.createElement(R.a,{as:"h1",icon:!0,textAlign:"center"},r.a.createElement(S.a,{name:"shopping cart",circular:!0}),r.a.createElement(R.a.Content,null,"Cart Empty")))}function ne(e){var t=Object.keys(e.list).map(function(t){return r.a.createElement(B.a,{key:t},r.a.createElement("b",null,"OrderNumber: "),e.list[t])});return r.a.createElement(B.a.Group,null,t)}function re(e){var t=Object.keys(e.res).map(function(t){return r.a.createElement(B.a,{key:t},r.a.createElement(R.a,{as:"h1"},e.movies[t].title),r.a.createElement(ne,{list:e.res[t]}))});return r.a.createElement(C.a,null,t)}var se=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={valid:!1,mounted:!1,carty:{},customer:{},formData:{firstName:"",lastName:"",email:"",address:"",ccId:"",expiration:""},error:{firstName:!1,lastName:!1,email:!1,address:!1,ccId:!1,expiration:!1},transaction:!1,disabled:!0,res:{}},e.handleAdd=function(t){var a=Object(l.a)({},e.state.carty);a[t.id].quantity+=1,e.setState({carty:a},function(){this.props.handleUpdateCart(this.state.carty),sessionStorage.setItem("cart",JSON.stringify(this.state.carty))})},e.handleMinus=function(t){var a=Object(l.a)({},e.state.carty);a[t.id].quantity-=1,a[t.id].quantity<=0&&delete a[t.id],e.setState({carty:a},function(){this.props.handleUpdateCart(this.state.carty),sessionStorage.setItem("cart",JSON.stringify(this.state.carty))})},e.handleCheckout=function(t){var a=e.state.formData,n=e.state.customer;if(Object.keys(a).every(function(e){return a[e]===n[e]})){var r=Object(l.a)({},e.state.carty);r.customerId=e.state.customer.id,fetch("https://"+window.location.hostname+":8443/cs122b/sale",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(t){e.setState({res:t,transaction:!0}),console.log(t)}).catch(function(e){return console.log(e)})}else console.log(a),console.log(n)},e.handleInputChange=e.handleInputChange.bind(Object(d.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({carty:this.props.cart},function(){if(te(this.state.carty)){var e=JSON.parse(sessionStorage.getItem("cart"));te(e)||this.setState({carty:e})}}),this.setState({customer:this.props.customer},function(){var e=JSON.parse(sessionStorage.getItem("customer"));if(te(e)){var t=Object(l.a)({},this.state.formData);t.firstName=this.state.customer.firstName,t.lastName=this.state.customer.lastName,t.email=this.state.customer.email,t.address=this.state.customer.address,this.setState({formData:t})}else this.setState({customer:e},function(){var e=Object(l.a)({},this.state.formData);e.firstName=this.state.customer.firstName,e.lastName=this.state.customer.lastName,e.email=this.state.customer.email,e.address=this.state.customer.address,this.setState({formData:e})})}),fetch("https://"+window.location.hostname+":8443/cs122b/login",{method:"GET",credentials:"include"}).then(function(t){403===t.status||e.setState({valid:!0}),e.setState({mounted:!0})}).catch(function(e){return console.log(e)})}},{key:"componentWillUnmount",value:function(){this.setState({mounted:!1})}},{key:"handleInputChange",value:function(e){var t=Object.assign({},this.state.formData);t[e.target.name]=e.target.value;var a=e.target.name,n=e.target.value;this.setState({formData:t},function(){var e=Object(l.a)({},this.state.error);e[a]=this.state.customer[a]!==n,this.setState({error:e},function(){var e=this.state.formData,t=this.state.customer,a=Object.keys(e).every(function(a){return e[a]===t[a]});a=!a,this.setState({disabled:a})})})}},{key:"render",value:function(){var e=this;if(!this.state.mounted||!this.state.valid)return this.state.mounted&&!this.state.valid?r.a.createElement(O.a,{to:"/login"}):r.a.createElement(x,null);try{if(te(this.state.carty))return r.a.createElement(ae,null);var t=Object.keys(this.state.carty).map(function(t){return r.a.createElement(B.a,{key:t,padded:"very"},r.a.createElement(R.a,{as:"h1"},e.state.carty[t].title),r.a.createElement(C.a,null,r.a.createElement("p",null,"Year: ",e.state.carty[t].year,r.a.createElement("br",null),"Director: ",e.state.carty[t].director,r.a.createElement("br",null),"Rating: ",e.state.carty[t].rating,r.a.createElement("br",null))),r.a.createElement("br",null),r.a.createElement(C.a,null,r.a.createElement(Z.a,{fluid:!0,value:e.state.carty[t].quantity}),r.a.createElement(A.a.Group,{compact:!0,attached:"bottom"},r.a.createElement(A.a,{icon:"minus",color:"teal",onClick:function(){return e.handleMinus(e.state.carty[t])}}),r.a.createElement(A.a,{icon:"plus",color:"teal",onClick:function(){return e.handleAdd(e.state.carty[t])}}))))});return r.a.createElement(C.a,null,t,r.a.createElement(ee.a,{closeIcon:!0,trigger:r.a.createElement(A.a,{color:"green",fluid:!0,content:"Checkout"})},r.a.createElement(R.a,{icon:"shopping cart",content:"Checkout"}),r.a.createElement(ee.a.Content,null,r.a.createElement(U.a,null,r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Input,{icon:"male",name:"firstName",defaultValue:this.state.formData.firstName,onChange:this.handleInputChange,error:this.state.error.firstName,placeholder:"First Name"}),r.a.createElement(U.a.Input,{icon:"male",name:"lastName",defaultValue:this.state.formData.lastName,onChange:this.handleInputChange,error:this.state.error.lastName,placeholder:"Last Name"}),r.a.createElement(U.a.Input,{icon:"mail",name:"email",defaultValue:this.state.formData.email,error:this.state.error.email,onChange:this.handleInputChange,placeholder:"E-mail"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Input,{icon:"address book",name:"address",defaultValue:this.state.formData.address,onChange:this.handleInputChange,error:this.state.error.address,placeholder:"Address"}),r.a.createElement(U.a.Input,{icon:"credit card",name:"ccId",onChange:this.handleInputChange,error:this.state.error.ccId,placeholder:"Credit Card"}),r.a.createElement(U.a.Input,{icon:"calendar",name:"expiration",onChange:this.handleInputChange,error:this.state.error.expiration,placeholder:"Expiration (YYYY-MM-DD)"})))),r.a.createElement(ee.a.Actions,null,r.a.createElement(ee.a,{trigger:r.a.createElement(A.a,{color:"green",content:"Confirm",disabled:this.state.disabled,onClick:this.handleCheckout})},r.a.createElement(R.a,{icon:"checkmark",content:"Order Confirmed"}),r.a.createElement(ee.a.Content,null,this.state.transaction?r.a.createElement(re,{res:this.state.res,movies:this.state.carty}):r.a.createElement(x,null))))))}catch(a){return r.a.createElement(ae,null)}}}]),t}(n.Component),ie=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://"+window.location.hostname+":8443/cs122b/employeelogin",{method:"GET",credentials:"include"}).then(function(t){403===t.status?console.log("Invalid session"):(console.log(e.props),te(e.props.employee)?(console.log("...but not as employee"),e.setState({valid:!1})):e.setState({valid:!0})),e.setState({mounted:!0})}).catch(function(e){return console.log(e)})}},{key:"getRetVal",value:function(){return r.a.createElement(O.a,{to:"/employee"})}},{key:"getSession",value:function(e){var t=this;fetch("https://"+window.location.hostname+":8443/cs122b/employeelogin",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then(function(e){return 403===e.status?(document.getElementById("Form").reset(),t.setState({valid:!1}),t.setState({error:!0})):t.setState({valid:!0}),e.json()}).then(function(e){t.props.getCust(e),console.log(e)}).catch(function(e){return console.log(e)})}}]),t}(Y),le=a(296),oe=a.n(le),ce={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},ue=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={schema:{},loading:!0,formData:{title:"",year:"0",director:"",star:"",genre:"",starname:"",stardob:"0",genrename:""},has_message:!1,message:null},e.handleMovie=function(t){t.preventDefault(),fetch("https://"+window.location.hostname+":8443/cs122b/employee?title="+e.state.formData.title+"&director="+e.state.formData.director+"&year="+e.state.formData.year+"&star="+e.state.formData.star+"&genre="+e.state.formData.genre,{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(t){e.setState({message:t.message,has_message:!0})})},e.handleStar=function(t){t.preventDefault(),fetch("https://"+window.location.hostname+":8443/cs122b/employee?starname="+e.state.formData.starname+"&stardob="+e.state.formData.stardob,{method:"get",credentials:"include"}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({message:t.message,has_message:!0})})},e.handleGenre=function(t){t.preventDefault(),fetch("https://"+window.location.hostname+":8443/cs122b/employee?genrename="+e.state.formData.genrename,{method:"get",credentials:"include"}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({message:t.message,has_message:!0})})},e.handleInputChange=e.handleInputChange.bind(Object(d.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getSchemaDatabase",value:function(){var e=this;fetch("https://"+window.location.hostname+":8443/cs122b/employee?schema=true",{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(t){e.setState({schema:t,loading:!1})})}},{key:"componentDidMount",value:function(){this.getSchemaDatabase()}},{key:"handleInputChange",value:function(e){var t=Object.assign({},this.state.formData);t[e.target.name]=e.target.value,this.setState({formData:t})}},{key:"render",value:function(){return r.a.createElement(C.a,null,this.state.loading?r.a.createElement(x,null):r.a.createElement(q.a,{style:{marginTop:"3em"}},r.a.createElement(q.a.Column,{width:5},r.a.createElement(oe.a,{data:this.state.schema,theme:ce})),r.a.createElement(q.a.Column,{width:11},this.state.has_message?r.a.createElement(_.a,{success:!0,header:"Result of Inserts",list:this.state.message}):null,r.a.createElement(B.a,null,r.a.createElement(U.a,{onSubmit:this.handleMovie},r.a.createElement(R.a,{as:"h1"},r.a.createElement(S.a,{name:"film",inverted:!0,circular:!0}),"Movie Input"),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Input,{icon:"film",name:"title",onChange:this.handleInputChange,placeholder:"Title"}),r.a.createElement(U.a.Input,{icon:"male",name:"director",onChange:this.handleInputChange,placeholder:"Director"}),r.a.createElement(U.a.Input,{icon:"calendar",name:"year",onChange:this.handleInputChange,placeholder:"Year"})),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Input,{icon:"star",name:"star",onChange:this.handleInputChange,placeholder:"Star"}),r.a.createElement(U.a.Input,{icon:"linkify",name:"genre",onChange:this.handleInputChange,placeholder:"Genre"})),r.a.createElement(A.a,{color:"teal",fluid:!0,content:"Add Movie",type:"submit"}))),r.a.createElement(B.a,null,r.a.createElement(U.a,{onSubmit:this.handleStar},r.a.createElement(R.a,{as:"h1"},r.a.createElement(S.a,{name:"star",inverted:!0,circular:!0}),"Star Input"),r.a.createElement(U.a.Group,null,r.a.createElement(U.a.Input,{icon:"star",name:"starname",onChange:this.handleInputChange,placeholder:"Star Name"}),r.a.createElement(U.a.Input,{icon:"calendar",name:"stardob",onChange:this.handleInputChange,placeholder:"Star Date of Birth"})),r.a.createElement(A.a,{color:"teal",fluid:!0,content:"Add Star",type:"submit"}))),r.a.createElement(B.a,null,r.a.createElement(U.a,{onSubmit:this.handleGenre},r.a.createElement(R.a,{as:"h1"},r.a.createElement(S.a,{name:"linkify",inverted:!0,circular:!0}),"Genre Input"),r.a.createElement(U.a.Input,{icon:"linkify",name:"genrename",onChange:this.handleInputChange,placeholder:"Genre Name"}),r.a.createElement(A.a,{color:"teal",fluid:!0,content:"Add Genre",type:"submit"}))))))}}]),t}(n.Component),he=a(194),de=a.n(he),me=a(297),ge=a(618),pe=a(301),fe=Object(pe.a)(function(e){return fetch("https://"+window.location.hostname+":8443/cs122b/fullsearch?query="+e,{method:"GET",credentials:"include"},console.log("Sending request")).then(function(e){return e.json()}).then(function(e){var t=[];return Object.keys(e.movies).forEach(function(a){t.push({key:e.movies[a].id,title:e.movies[a].title,description:"Director: "+e.movies[a].director+", "+e.movies[a].year,year:e.movies[a].year,movieid:e.movies[a].id})}),{data:e,movies:t}})},400),ve=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={value:"",redir:!1,fullredir:!1,data:[],movieid:null,cache:[]},a.resetComponent=function(){return a.setState({isLoading:!1,results:[]})},a.handleResultSelect=function(e,t){var n=t.result;return a.setState({value:n.title,redir:!0,movieid:n.movieid},function(){this.setState({redir:!1})})},a.handleSubmit=function(e){e.preventDefault(),a.setState({fullredir:!0},function(){this.setState({fullredir:!1})})},a.handleSearchChange=function(){var e=Object(me.a)(de.a.mark(function e(t,n){var r,s;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.value,a.setState({isLoading:!0,value:r}),!(r.length<3)){e.next=4;break}return e.abrupt("return",a.resetComponent());case 4:if(!(r in a.state.cache)){e.next=9;break}console.log("Initializing search"),setTimeout(function(){console.log("Using cache"),console.log(a.state.cache[r].movies),a.setState({isLoading:!1,results:a.state.cache[r].movies,data:a.state.cache[r].data})},300),e.next=13;break;case 9:return e.next=11,fe(r);case 11:s=e.sent,setTimeout(function(){var e=Object(l.a)({},a.state.cache);e[r]=s,console.log(s.movies),a.setState({isLoading:!1,results:s.movies,data:s.data,cache:e},function(){sessionStorage.setItem("cache",JSON.stringify(this.state.cache))})},300);case 13:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.resetComponent()}},{key:"componentDidMount",value:function(){var e=JSON.parse(sessionStorage.getItem("cache"));null!==e&&this.setState({cache:e})}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.redir?r.a.createElement(O.a,{to:{pathname:"/movie",search:"?id="+this.state.movieid}}):null,this.state.fullredir?r.a.createElement(O.a,{to:{pathname:"/fullresults",state:{data:this.state.data,value:this.state.value,reload:"yes"}}}):null,r.a.createElement(U.a,{onSubmit:this.handleSubmit},r.a.createElement(ge.a,{loading:this.state.isLoading,onResultSelect:this.handleResultSelect,onSearchChange:this.handleSearchChange,results:this.state.results,value:this.state.value,input:{action:"Submit"},style:{paddingTop:"5px",paddingBottom:"5px",paddingLeft:"10px"}})))}}]),t}(n.Component),Ee=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:0,valid:!1,value:"",mounted:!1,data:[],activePage:1,pages:0,limit:10},a.handlePaginationChange=function(e,t){var n=t.activePage;return a.setState({activePage:n},a.getMovies)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getMovies",value:function(){var e=this;this.setState({search:"loading"}),fetch("https://"+window.location.hostname+":8443/cs122b/fullsearch?query="+this.state.value+"&offset="+(this.state.activePage-1)*this.state.limit,{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(t){return e.setState({data:t.movies,search:"received"},function(){console.log(this.state)})})}},{key:"componentDidMount",value:function(e){Object(z.a)(Object(h.a)(t.prototype),"componentDidMount",this).call(this),this.setState({data:this.props.location.state.data.movies,total:this.props.location.state.data.numRecords,value:this.props.location.state.value,search:"received"},function(){this.setState({pages:Math.ceil(this.state.total/this.state.limit)})})}},{key:"componentWillReceiveProps",value:function(e){e.location.state.value!==this.state.value&&this.setState({data:e.location.state.data.movies,total:e.location.state.data.numRecords,value:e.location.state.value,search:"received"},function(){this.setState({pages:Math.ceil(this.state.total/this.state.limit)})})}},{key:"render",value:function(){return this.state.mounted&&this.state.valid?r.a.createElement(C.a,null,r.a.createElement(C.a,{textAlign:"center",style:{marginBottom:"3em"}},r.a.createElement(X.a,{totalPages:this.state.pages,activePage:this.state.activePage,onPageChange:this.handlePaginationChange,siblingRange:2})),r.a.createElement(F,{data:this.state.data,handleAddToCart:this.props.handleAddToCart})):!this.state.valid&&this.state.mounted?r.a.createElement(O.a,{to:"/login"}):r.a.createElement(x,null)}}]),t}(G),ye=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={cart:{},customer:{},employee:{},is_employee:!1},e.handleAddToCart=function(t){var a=Object(l.a)({},e.state.cart);t.id in a?a[t.id].quantity+=1:(a[t.id]=t,a[t.id].quantity=1),e.setState({cart:a},function(){sessionStorage.setItem("cart",JSON.stringify(this.state.cart))})},e.handleUpdateCart=function(t){e.setState({cart:t})},e.getCust=e.getCust.bind(Object(d.a)(e)),e.getEmp=e.getEmp.bind(Object(d.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getEmp",value:function(e){this.setState({employee:e,is_employee:!0}),sessionStorage.setItem("employee",JSON.stringify(e))}},{key:"getCust",value:function(e){this.setState({customer:e}),sessionStorage.setItem("customer",JSON.stringify(e))}},{key:"componentDidMount",value:function(){var e=JSON.parse(sessionStorage.getItem("cart"));te(e)||this.setState({cart:e});var t=JSON.parse(sessionStorage.getItem("customer"));te(t)||this.setState({customer:t},function(){})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(g.a,{basename:"/cs122b"},r.a.createElement("div",null,this.state.is_employee?r.a.createElement(v.a,{inverted:!0,fluid:!0,widths:1},r.a.createElement(v.a.Item,{as:p.a,to:"/emplogin",name:"emplogin",header:!0},"Employee Login")):r.a.createElement(v.a,{inverted:!0,widths:6},r.a.createElement(v.a.Item,{as:p.a,to:"/",name:"top-charts",header:!0},"Top Twenty"),r.a.createElement(v.a.Item,{as:p.a,to:"/search",name:"search",header:!0},"Search"),r.a.createElement(v.a.Item,{as:p.a,to:{pathname:"/browse",state:{genre:"",reload:"no"}},name:"browse",header:!0},"Browse"),r.a.createElement(v.a.Item,{as:p.a,to:"/cart",name:"cart",header:!0},"Checkout"),r.a.createElement(v.a.Item,{as:p.a,to:"/emplogin",name:"emplogin",header:!0},"Employee Login"),te(this.state.customer)?null:r.a.createElement(v.a.Item,{as:ve})),r.a.createElement(f.a,{path:"/",exact:!0,render:function(t){return r.a.createElement(G,Object.assign({},t,{handleAddToCart:e.handleAddToCart}))}}),r.a.createElement(f.a,{path:"/star",exact:!0,render:function(t){return r.a.createElement(J,Object.assign({},t,{handleAddToCart:e.handleAddToCart}))}}),r.a.createElement(f.a,{path:"/movie",exact:!0,render:function(t){return r.a.createElement(P,Object.assign({},t,{handleAddToCart:e.handleAddToCart}))}}),r.a.createElement(f.a,{path:"/login",exact:!0,render:function(t){return r.a.createElement(Y,Object.assign({},t,{getCust:e.getCust}))}}),r.a.createElement(f.a,{path:"/emplogin",exact:!0,render:function(t){return r.a.createElement(ie,Object.assign({},t,{getCust:e.getEmp,employee:e.state.employee}))}}),r.a.createElement(f.a,{path:"/employee",exact:!0,render:function(e){return r.a.createElement(ue,e)}}),r.a.createElement(f.a,{path:"/fullresults",exact:!0,render:function(t){return r.a.createElement(Ee,Object.assign({},t,{handleAddToCart:e.handleAddToCart}))}}),r.a.createElement(f.a,{path:"/search",exact:!0,render:function(t){return r.a.createElement($,Object.assign({},t,{handleAddToCart:e.handleAddToCart}))}}),r.a.createElement(f.a,{path:"/browse",exact:!0,render:function(t){return r.a.createElement(Q,Object.assign({},t,{handleAddToCart:e.handleAddToCart}))}}),r.a.createElement(f.a,{path:"/cart",exact:!0,render:function(t){return r.a.createElement(se,Object.assign({},t,{handleUpdateCart:e.handleUpdateCart,handleAddToCart:e.handleAddToCart,customer:e.state.customer,cart:e.state.cart}))}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[313,1,2]]]);
//# sourceMappingURL=main.00196b19.chunk.js.map